package jdbc.json;
import org.apache.axis.client.Call;   
import org.apache.axis.client.Service;   
import org.apache.axis.encoding.XMLType;

public class Test {
	static String json = "{\"id\":\"8\",\"name\":\"python\",\"city\":\"南京\"}";
	//执行服务的方法
	public String savedata() { 
		 
	         String endpoint ="";  
	         String arg0="";
             String arg1="";
             String arg2="";
             String arg3="";
             String arg4="";	
       
		 try {  
			     endpoint =request.getParameter("endpoint");
			     arg0 =request.getParameter("arg0");
			     arg1 =request.getParameter("arg1");
			     arg2 =request.getParameter("arg2");
			     arg3 =request.getParameter("arg3");
			     arg4 =request.getParameter("arg4");

			    Service service = new Service();  
		        Call call = (Call) service.createCall();
	            call.setTargetEndpointAddress(endpoint);  
	            // WSDL里面描述的接口名称(要调用的方法)  
	            call.setOperationName("S_Apply");  
	            // 接口方法的参数名,  
	            call.addParameter("arg0", XMLType.XSD_STRING, ParameterMode.IN);
	            call.addParameter("arg1", XMLType.XSD_STRING, ParameterMode.IN);  
	            call.addParameter("arg2", XMLType.XSD_STRING, ParameterMode.IN);  
	            call.addParameter("arg3", XMLType.XSD_STRING, ParameterMode.IN);  
	            call.addParameter("arg4", XMLType.XSD_STRING, ParameterMode.IN);  
	            // 设置被调用方法的返回值类型  
	            call.setReturnType(XMLType.XSD_STRING);
	          
	            //设置方法中参数的值  
	            Object[] paramValues = new Object[] {arg0,arg1,arg2,arg3,arg4};  
	            // 给方法传递参数，并且调用方法  
	            call.setTimeout(3000);
	            String result = (String) call.invoke(paramValues);    
	            return result.toString();
	        } catch (Exception e) {  
	        	e.printStackTrace();
	        	return "交易失败,请确认服务地址和参数正确与否!";
	        }  		 		 
 } 
	public static void main(String[] args){
		OperateOracle oo = new OperateOracle();
		oo.getConnection();
		Wsi ss = new Wsi();
		ss.save_city(json);
//		City_enty city = JSON.parseObject(json,City_enty.class);
//		
//		oo.Call_proc(city.getId(), city.getName(), city.getCity());
//		System.out.println("123");	
	}
	
	
}
